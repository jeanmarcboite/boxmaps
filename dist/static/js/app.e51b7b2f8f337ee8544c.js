webpackJsonp([1],{"7zck":function(e,t){},"8WEw":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("v-content",[t("router-view")],1)],1)},staticRenderFns:[]};var r=a("VU/8")({data:function(){return{title:"Vuetify.js"}},name:"App"},i,!1,function(e){a("t5qA")},null,null).exports,o=a("/ocq"),s=a("Dd8w"),l=a.n(s),c=a("9bGr"),u=a("gCHX"),d=a("I0Hm"),p=a("JwSH"),m=a("vXa5"),f=a("Ey1i"),w=a("TDso"),h=a("NYxO"),g=a("VbcQ"),v=a("L2CZ"),y=a("Hlta"),x=a("bw/M"),b=(a("sax8"),{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),L={state:{zoom:12,center:{faycelles:a("yGLh").a.transform([1.987147,44.565865],b.dataProjection,b.featureProjection)}.faycelles},getters:{zoom:function(e){return e.zoom},center:function(e){return e.center}},actions:{},mutations:{setView:function(e,t){e.zoom=t.zoom,e.center=t.center}}},k={state:{osm:{visible:!1,layers:{osm:{visible:!0}}},ign:{visible:!0,layers:{geo:{visible:!0},photos:{visible:!1}}},bing:{visible:!1,layers:{road:{visible:!1},imagery:{visible:!1}}},tracks:{}},getters:{osm:function(e){return e.osm},ign:function(e){return e.ign},bing:function(e){return e.bing}},mutations:{setVisibility:function(e,t){t.layer?e[t.group][t.layer].visible=t.visible:e[t.group].visible=t.visible},addGPX:function(e,t){e.gpx[t.title]=t.gpx}}},C=a("woOf"),S=a.n(C),P=a("HLCg"),E=a("aC3Q"),M=a("cURS");function O(e,t){t instanceof g.a?_(e,t):t instanceof E.a&&function(e,t){var a=(new M.a).writeFeatures(t.getSource().getFeatures(),b);e[t.get("title")]=a}(e,t)}function _(e,t){t.getLayers().forEach(function(t){return O(e,t)})}var I={state:{},mutations:{addTrack:function(e,t){var a={};_(a,t),S()(e,a)}}},N=a("v/L+"),T=new(a.n(N).a)({key:"maps-vuex",storage:window.localStorage});n.a.use(h.a);var A=[T.plugin];var z=new h.a.Store({modules:{layers:k,tracks:I,settings:L},state:{app:"Vuetify Map"},plugins:A}),H="7w2fnww4mguagxhybm8l55gw",V=[156543.03392804103,78271.5169640205,39135.75848201024,19567.879241005125,9783.939620502562,4891.969810251281,2445.9849051256406,1222.9924525628203,611.4962262814101,305.74811314070485,152.87405657035254,76.43702828517625,38.218514142588134,19.109257071294063,9.554628535647034,4.777314267823517,2.3886571339117584,1.1943285669558792,.5971642834779396,.29858214173896974,.14929107086948493,.07464553543474241];function G(e){return new y.a({url:"https://wxs.ign.fr/"+H+"/geoportail/wmts",layer:e,matrixSet:"PM",format:"image/jpeg",style:"normal",tileGrid:new x.a({origin:[-20037508,20037508],resolutions:V,matrixIds:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"]})})}var R=[new v.a({title:"IGN Maps",type:"base",baseLayer:!0,source:G("GEOGRAPHICALGRIDSYSTEMS.MAPS"),visible:z.getters.ign.layers.geo.visible,noSwitcherDelete:!0}),new v.a({title:"IGN Photos",source:G("ORTHOIMAGERY.ORTHOPHOTOS"),visible:z.getters.ign.layers.photos.visible})],j=a("YzAM"),F="At70LhIzqlj9R8t_QNprh9scHr6d-6MrPeqtim9vsvKHnEJC4fJzDRsaxgSDwL0i",q=[new v.a({title:"Bing Road",baseLayer:!0,visible:z.getters.bing.layers.road.visible,source:new j.a({key:F,imagerySet:"Road"})}),new v.a({title:"Bing Aerial",visible:z.getters.bing.layers.imagery.visible,source:new j.a({key:F,imagerySet:"Aerial"})})],D=a("/3dj"),B=[new v.a({title:"OSM",type:"base",baseLayer:!0,source:new D.a,visible:z.getters.osm.layers.osm.visible,noSwitcherDelete:!0})],J=[new g.a({title:"Bing maps",layers:q,visible:z.getters.bing.visible}),new g.a({title:"IGN maps",layers:R,visible:z.getters.ign.visible,openInLayerSwitcher:!0}),new g.a({title:"Open Maps",layers:B,visible:z.getters.osm.visible})],X=a("GNyT"),Y=a("rwR+"),Z=a("YDKv"),Q=a("XdvO"),U=a("86p+"),K=a("6HMI"),W=a("lY9i"),$=a("tOEd"),ee=a("/Z+s"),te=a("uODu"),ae=(new $.a({image:new ee.a({radius:10,radius2:5,points:5,fill:new K.a({color:"red"})}),stroke:new W.a({color:[0,0,255],width:2}),fill:new K.a({color:[0,0,255,.3]})}),{Point:new $.a({image:new ee.a({radius:10,radius2:5,points:8,fill:new K.a({color:"red"})}),image2:new te.a({fill:new K.a({color:"rgba(255,255,0,0.5)"}),radius:8,stroke:new W.a({color:"#f0f",width:1})})}),LineString:new $.a({stroke:new W.a({color:"#f00",width:3})}),Polygon:new $.a({fill:new K.a({color:"rgba(0,255,255,0.5)"}),stroke:new W.a({color:"#0ff",width:1})}),MultiPoint:new $.a({image:new te.a({fill:new K.a({color:"rgba(255,0,255,0.5)"}),radius:5,stroke:new W.a({color:"#f0f",width:1})})}),MultiLineString:new $.a({stroke:new W.a({color:"#00f",width:3})}),MultiPolygon:new $.a({fill:new K.a({color:"rgba(0,0,255,0.5)"}),stroke:new W.a({color:"#00f",width:1})})}),ne=function(e,t){var a=e.getStyleFunction();return a?a.call(e,t):ae[e.getGeometry().getType()]},ie=new X.a({formatConstructors:[P.a,M.a,Y.a,Z.a,Q.a]});ie.on("addfeatures",function(e){var t="new layer";e.file&&(t=e.file.name);var a=new U.a({features:e.features});e.target.map_.addLayer(new E.a({title:t,source:a,style:ne,displayInLayerSwitcher:!0})),e.target.map_.getView().fit(a.getExtent())});var re=ie,oe=a("CXX0"),se=a("LL0P"),le=a("8+tQ"),ce=a("bdNf"),ue=a("mAt+"),de=a("P/M1"),pe=a("BO1k"),me=a.n(pe),fe=(a("qxxq"),a("p8Td"),function(e){return function(t){return function(e,t){var a=(new P.a).readFeatures(e.target.result,b),n=new U.a({features:a}),i=new E.a({title:t.title,source:n,style:ne});i.extent=n.getExtent().slice(),t.map.addLayer(i),t.fit&&t.map.getView().fit(n.getExtent()),t.store.commit("addTrack",t.map)}(t,e)}}),we=function(e){return function(t){return function(e,t){new P.a;var a=!0,n=!1,i=void 0;try{for(var r,o=me()(e.target.files);!(a=(r=o.next()).done);a=!0){var s=r.value,c=new FileReader;c.readAsText(s,"UTF-8"),c.onload=fe(l()({},t,{title:s.name,file:s,fit:1===e.target.files.length}))}}catch(e){n=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(n)throw i}}}(t,e)}};function he(e){e.html='<i class="'+e.icon+'"></i>',ue.a.call(this,e)}function ge(e){se.a.call(this,e);var t=new f.a({html:'<i class="fa fa-folder-open"></i>',title:"Read track file",handleClick:function(){document.getElementById("inputFile").click()}});document.getElementById("inputFile").onchange=we(e),this.addControl(t);var a=new se.a({toggleOne:!0,group:!0});this.addControl(a);var n=new he({icon:"fa fa-hand-pointer-o",className:"select",title:"Select",interaction:new le.a}),i=new U.a({}),r=new he({icon:"fa fa-pencil",title:"draw line",interaction:new ce.a({type:"LineString",source:i})});a.addControl(n),a.addControl(r),this.addControl(new de.a),e.map.addLayer(new E.a({title:"draw line",displayInLayerSwitcher:!1,source:i,style:ne})),e.map.addControl(this)}oe.a.inherits(he,ue.a),oe.a.inherits(ge,se.a);var ve=ge,ye=a("kjK6"),xe=a("Zx67"),be=a.n(xe),Le=a("Zrlr"),ke=a.n(Le),Ce=a("wxAW"),Se=a.n(Ce),Pe=a("zwoO"),Ee=a.n(Pe),Me=a("yEsh"),Oe=a.n(Me),_e=a("Pf15"),Ie=a.n(_e),Ne=a("h5AC"),Te=a("2fQu"),Ae=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ke()(this,t);var a=document.createElement("div"),n=Ee()(this,(t.__proto__||be()(t)).call(this,{element:a}));n.options=e||{},n.options.onextent="function"==typeof e.onextent?e.onextent:null,n.options.hasextent=e.extent||e.onextent,n.options.tipLabel=e.tipLabel?e.tipLabel:"Tracks","function"==typeof e.displayInLayerSwitcher&&(n.displayInLayerSwitcher=e.displayInLayerSwitcher),n.mapListeners=[],n.hiddenClassName="ol-unselectable ol-control track-switcher",n.shownClassName="shown",a.className=n.hiddenClassName;var i=document.createElement("button");i.setAttribute("title",n.options.tipLabel),a.appendChild(i),n.panel=document.createElement("div"),n.panel.className="panel",a.appendChild(n.panel);var r=n;return n.options.mouseover?i.onmouseover=function(e){r.showPanel()}:n.options.click=!0,n.options.click&&(i.onclick=function(e){e=e||window.event,r.showPanel(),e.preventDefault()}),r.panel.onmouseout=function(e){e=e||window.event,r.panel.contains(e.toElement||e.relatedTarget)||r.hidePanel()},n}return Ie()(t,e),Se()(t,[{key:"setMap",value:function(e){for(var a=0;a<this.mapListeners.length;a++)Te.a.unByKey(this.mapListeners[a]);if(this.mapListeners.length=0,Oe()(t.prototype.__proto__||be()(t.prototype),"setMap",this).call(this,e),e){var n=this;this.mapListeners.push(e.on("pointerdown",function(){n.hidePanel()})),this.renderPanel()}}},{key:"showPanel",value:function(){this.element.classList.contains(this.shownClassName)||(this.element.classList.add(this.shownClassName),this.renderPanel())}},{key:"hidePanel",value:function(){this.element.classList.contains(this.shownClassName)&&this.element.classList.remove(this.shownClassName)}},{key:"renderPanel",value:function(){for(;this.panel.firstChild;)this.panel.removeChild(this.panel.firstChild);var e=document.createElement("ul");this.panel.appendChild(e),this.listLayers(this.getMap(),e)}},{key:"listLayers",value:function(e,t){var a=this;e.getLayers().forEach(function(e){return a.listLayer(e,t)})}},{key:"listLayer",value:function(e,t){e instanceof g.a?this.listLayers(e,t):e instanceof E.a&&e.extent&&t.appendChild(this.liLayer(e))}},{key:"liLayer",value:function(e){var a=this,n=document.createElement("li");n.className="layer";var i=document.createElement("input");i.type="radio",i.name="baseTrack",i.onchange=function(t){t.target.checked&&e.extent&&a.getMap().getView().fit(e.extent)};var r=t.uuid();i.id=r,n.appendChild(i);var o=document.createElement("label");return o.htmlFor=r,o.innerHTML=e.get("title"),n.appendChild(o),n}}],[{key:"uuid",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),t}(Ne.a),ze=Ae;Ae.prototype.displayInLayerSwitcher=function(e){return!0};var He=function(e,t){for(var a in t)t.hasOwnProperty(a)&&(n={map:e,features:t[a],title:a},r=void 0,o=void 0,i=(new M.a).readFeatures(n.features,b),r=new U.a({features:i}),(o=new E.a({title:n.title,source:r,style:ne})).extent=r.getExtent().slice(),n.map.addLayer(o));var n,i,r,o},Ve={name:"Map",data:function(){return{title:"Maps",direction:"vertical",right:!0,drawer:!1,map:void 0}},computed:l()({},Object(h.b)(["zoom","center"])),methods:l()({},Object(h.c)(["addTrack"])),mounted:function(){var e=this;this.map=new c.a({interactions:w.a.defaults().extend([re]),layers:J,target:"map",view:new u.a({center:this.center,zoom:this.zoom})}),this.map.addControl(new d.a),this.map.addControl(new m.a({trash:!0,extent:!0}));var t=new p.a;t.on("select",function(t){e.map.getView().animate({center:t.coordinate,zoom:Math.max(e.map.getView().getZoom(),13)})}),this.map.addControl(t),this.map.on("moveend",function(e){z.commit("setView",{zoom:e.map.getView().getZoom(),center:e.map.getView().getCenter()})});new ve({store:this.$store,map:this.map});var a=new f.a({html:'<i class="fa fa-wrench"></i>',title:"Toggle toolbar",handleClick:function(){}});a.element.classList.add("ol-wrench"),this.map.addControl(a),new f.a({html:'<i class="fa fas fa-map-signs"></i>',title:"Toggle toolbar",handleClick:function(t){console.log(e.drawer),t.preventDefault(),t.stopPropagation()}}).element.classList.add("ol-profile"),this.map.profil=new ye.a({target:"profil",width:400,height:200}),this.map.addControl(this.map.profil),He(this.map,this.$store.state.tracks);var n=new ze;this.map.addControl(n)}},Ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app"},[a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"inputFile",accept:".gpx",multiple:""}}),e._v(" "),a("div",{staticClass:"map",attrs:{id:"map"}}),e._v(" "),a("v-navigation-drawer",{attrs:{temporary:"",right:e.right,fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-expansion-panel",e._l(5,function(t,n){return a("v-expansion-panel-content",{key:n},[a("div",{attrs:{slot:"header"},slot:"header"},[e._v("Item\n          ")]),e._v(" "),a("v-card",[a("v-card-text",[e._v("Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.")])],1)],1)}))],1)],1)},staticRenderFns:[]};var Re=a("VU/8")(Ve,Ge,!1,function(e){a("8WEw")},null,null).exports;n.a.use(o.a);var je=new o.a({routes:[{path:"/",name:"Maps",component:Re}]}),Fe=a("3EgV"),qe=a.n(Fe),De=(a("7zck"),a("9JMe")),Be=a("HcO+"),Je=a.n(Be),Xe=a("yJzH");n.a.use(qe.a),n.a.config.productionTip=!1,n.a.use(Je.a),Object(De.sync)(z,je),n.a.use(Xe.a,"v-icon"),new n.a({el:"#app",router:je,store:z,components:{App:r},template:"<App/>"})},t5qA:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e51b7b2f8f337ee8544c.js.map