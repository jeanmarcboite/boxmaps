webpackJsonp([1],{"7zck":function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("v-content",[t("router-view")],1)],1)},staticRenderFns:[]};var r=n("VU/8")({data:function(){return{title:"Vuetify.js",miniVariant:!1,clipped:!0,items:[{icon:"bubble_chart",title:"Inspire"}],drawer:!0}},name:"App"},i,!1,function(e){n("hjYp")},null,null).exports,o=n("/ocq"),s=n("d7EF"),l=n.n(s),c=n("Dd8w"),u=n.n(c),d=n("9bGr"),m=n("gCHX"),p=n("Ey1i"),f=n("TDso"),w=n("NYxO"),g=n("VbcQ"),v=n("L2CZ"),h=n("Hlta"),b=n("bw/M"),y=(n("sax8"),n("yGLh")),x={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"},k=function(e,t){return y.a.transform([e,t],x.dataProjection,x.featureProjection)},L={Faycelles:k(1.987147,44.565865),Paris:k(2.351828,48.856578),London:k(-.1275,51.507222),Geneve:k(.149985,46.200013),Bruxelles:k(4.35,50.83),Berlin:k(3.383333,52.516667),Madrid:k(-3.683333,40.433333),Roma:k(12.48657,41.888732)},M={state:{zoom:12,center:L.faycelles,drawer:!1,miniVariant:!1},getters:{drawer:function(e){return e.drawer},miniVariant:function(e){return e.miniVariant},zoom:function(e){return e.zoom},center:function(e){return e.center}},actions:{},mutations:{setView:function(e,t){e.zoom=t.zoom,e.center=t.center},setDrawer:function(e,t){e.drawer=t}}},C={state:{osm:{visible:!1,layers:{osm:{visible:!0}}},ign:{visible:!0,layers:{geo:{visible:!0},photos:{visible:!1}}},bing:{visible:!1,layers:{road:{visible:!1},imagery:{visible:!1}}},tracks:{}},getters:{osm:function(e){return e.osm},ign:function(e){return e.ign},bing:function(e){return e.bing}},mutations:{setVisibility:function(e,t){t.layer?e[t.group][t.layer].visible=t.visible:e[t.group].visible=t.visible},addGPX:function(e,t){e.gpx[t.title]=t.gpx}}},P=n("woOf"),S=n.n(P),E=n("aC3Q"),I=n("cURS");function V(e,t){t instanceof g.a?_(e,t):t instanceof E.a&&function(e,t){var n=(new I.a).writeFeatures(t.getSource().getFeatures(),x);e[t.get("title")]=n}(e,t)}function _(e,t){t.getLayers().forEach(function(t){return V(e,t)})}var z={state:{},mutations:{addTrack:function(e,t){var n={};_(n,t),S()(e,n)}}},O={state:{bookmarks:{Faycelles:{pos:L.Faycelles,zoom:15,permanent:!0},Paris:{pos:L.Paris,zoom:11,permanent:!0},London:{pos:L.London,zoom:11,permanent:!0},Geneve:{pos:L.Geneve,zoom:13,permanent:!0},Bruxelles:{pos:L.Bruxelles,zoom:12,permanent:!0},Berlin:{pos:L.Berlin,zoom:12,permanent:!0},Madrid:{pos:L.Madrid,zoom:12},Roma:{pos:L.Roma,zoom:12}}},getters:{bookmarks:function(e){return e.bookmarks}},mutations:{addBookmark:function(e,t){e.bookmarks[t.name]=t.value}}},H=n("v/L+"),T=new(n.n(H).a)({key:"maps-vuex",storage:window.localStorage});a.a.use(w.a);var B=[T.plugin];var F=new w.a.Store({modules:{layers:C,tracks:z,bookmarks:O,settings:M},state:{app:"Vuetify Map"},plugins:B}),G="7w2fnww4mguagxhybm8l55gw",R=[156543.03392804103,78271.5169640205,39135.75848201024,19567.879241005125,9783.939620502562,4891.969810251281,2445.9849051256406,1222.9924525628203,611.4962262814101,305.74811314070485,152.87405657035254,76.43702828517625,38.218514142588134,19.109257071294063,9.554628535647034,4.777314267823517,2.3886571339117584,1.1943285669558792,.5971642834779396,.29858214173896974,.14929107086948493,.07464553543474241];function j(e){return new h.a({url:"https://wxs.ign.fr/"+G+"/geoportail/wmts",layer:e,matrixSet:"PM",format:"image/jpeg",style:"normal",tileGrid:new b.a({origin:[-20037508,20037508],resolutions:R,matrixIds:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"]})})}var A=[new v.a({title:"IGN Maps",type:"base",baseLayer:!0,source:j("GEOGRAPHICALGRIDSYSTEMS.MAPS"),visible:F.getters.ign.layers.geo.visible,noSwitcherDelete:!0}),new v.a({title:"IGN Photos",source:j("ORTHOIMAGERY.ORTHOPHOTOS"),visible:F.getters.ign.layers.photos.visible})],D=n("YzAM"),N="At70LhIzqlj9R8t_QNprh9scHr6d-6MrPeqtim9vsvKHnEJC4fJzDRsaxgSDwL0i",q=[new v.a({title:"Bing Road",baseLayer:!0,visible:F.getters.bing.layers.road.visible,source:new D.a({key:N,imagerySet:"Road"})}),new v.a({title:"Bing Aerial",visible:F.getters.bing.layers.imagery.visible,source:new D.a({key:N,imagerySet:"Aerial"})})],Y=n("/3dj"),$=[new v.a({title:"OSM",type:"base",baseLayer:!0,source:new Y.a,visible:F.getters.osm.layers.osm.visible,noSwitcherDelete:!0})],J=[new g.a({title:"Bing maps",layers:q,visible:F.getters.bing.visible}),new g.a({title:"IGN maps",layers:A,visible:F.getters.ign.visible,openInLayerSwitcher:!0}),new g.a({title:"Open Maps",layers:$,visible:F.getters.osm.visible})],U=n("GNyT"),X=n("HLCg"),Z=n("rwR+"),Q=n("YDKv"),K=n("XdvO"),W=n("86p+"),ee=n("6HMI"),te=n("lY9i"),ne=n("tOEd"),ae=n("/Z+s"),ie=n("uODu"),re=(new ne.a({image:new ae.a({radius:10,radius2:5,points:5,fill:new ee.a({color:"red"})}),stroke:new te.a({color:[0,0,255],width:2}),fill:new ee.a({color:[0,0,255,.3]})}),{Point:new ne.a({image:new ae.a({radius:10,radius2:5,points:8,fill:new ee.a({color:"red"})}),image2:new ie.a({fill:new ee.a({color:"rgba(255,255,0,0.5)"}),radius:8,stroke:new te.a({color:"#f0f",width:1})})}),LineString:new ne.a({stroke:new te.a({color:"#f00",width:3})}),Polygon:new ne.a({fill:new ee.a({color:"rgba(0,255,255,0.5)"}),stroke:new te.a({color:"#0ff",width:1})}),MultiPoint:new ne.a({image:new ie.a({fill:new ee.a({color:"rgba(255,0,255,0.5)"}),radius:5,stroke:new te.a({color:"#f0f",width:1})})}),MultiLineString:new ne.a({stroke:new te.a({color:"#00f",width:3})}),MultiPolygon:new ne.a({fill:new ee.a({color:"rgba(0,0,255,0.5)"}),stroke:new te.a({color:"#00f",width:1})})}),oe=function(e,t){var n=e.getStyleFunction();return n?n.call(e,t):re[e.getGeometry().getType()]},se=new U.a({formatConstructors:[X.a,I.a,Z.a,Q.a,K.a]});se.on("addfeatures",function(e){var t="new layer";e.file&&(t=e.file.name);var n=new W.a({features:e.features});e.target.map_.addLayer(new E.a({title:t,source:n,style:oe,displayInLayerSwitcher:!0})),e.target.map_.getView().fit(n.getExtent())});var le=se,ce=n("kjK6"),ue=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(a={map:e,features:t[n],title:n},r=void 0,o=void 0,i=(new I.a).readFeatures(a.features,x),r=new W.a({features:i}),(o=new E.a({title:a.title,source:r,style:oe})).extent=r.getExtent().slice(),a.map.addLayer(o));var a,i,r,o},de=function(e,t,n){t.getLayers().forEach(function(t){return me(e,t,n)})},me=function(e,t,n){t instanceof g.a?de(e,t,n):t instanceof E.a&&t.extent&&n.appendChild(pe(e,t))},pe=function(e,t){var n=document.createElement("li");n.className="layer";var a=document.createElement("input");a.type="radio",a.name="baseTrack",a.onchange=function(n){e&&n.target.checked&&t.extent&&e.getView().fit(t.extent)};var i=fe();a.id=i,n.appendChild(a);var r=document.createElement("label");return r.htmlFor=i,r.innerHTML=t.get("title"),n.appendChild(r),n},fe=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},we=de,ge={name:"Menu",props:["map"],computed:u()({},Object(w.b)(["miniVariant"]),{drawer:{get:function(){return this.$store.state.settings.drawer},set:function(e){this.$store.commit("setDrawer",e)}}}),data:function(){return{title:"Menu",subtitle:"<i>Menu</i> can be used to display a menu or information on the top of the map.",menu:[{id:"lorem",title:"Item 1",content:"\n      <v-card>\n        <v-card-text>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</v-card-text>\n      </v-card>\n          "},{id:"tracks",title:"Tracks",content:'<ul id="trackList"/>'}]}},methods:{onInput:function(e,t){t.isOpen=e,t.isOpen&&we(this.map,this.map,document.getElementById("trackList"))}}},ve={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"menu"}},[n("v-navigation-drawer",{attrs:{temporary:"","mini-variant":e.miniVariant,"enable-resize-watcher":"",fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("h1",[n("span",{domProps:{innerHTML:e._s(e.title)}})]),e._v(" "),n("p",{staticStyle:{"border-bottom":"1px solid #999"},domProps:{innerHTML:e._s(e.subtitle)}}),e._v(" "),n("v-expansion-panel",e._l(e.menu,function(t){return n("v-expansion-panel-content",{key:t.id,on:{input:function(n){e.onInput(n,t)}}},[n("div",{attrs:{slot:"header"},domProps:{innerHTML:e._s(t.title)},slot:"header"}),e._v(" "),n("div",{attrs:{id:"expansionPanelContent"+t.id},domProps:{innerHTML:e._s(t.content)}})])})),e._v(" "),n("div",{staticClass:"data"})],1)],1)},staticRenderFns:[]};var he=n("VU/8")(ge,ve,!1,function(e){n("bMoH")},null,null).exports,be=n("BO1k"),ye=n.n(be),xe=(n("qxxq"),n("p8Td"),function(e){return function(t){return function(e,t){var n=(new X.a).readFeatures(e.target.result,x),a=new W.a({features:n}),i=new E.a({title:t.title,source:a,style:oe});i.extent=a.getExtent().slice(),t.map.addLayer(i),t.fit&&t.map.getView().fit(a.getExtent()),t.store.commit("addTrack",t.map)}(t,e)}}),ke=function(e){return function(t){return function(e,t){var n=!0,a=!1,i=void 0;try{for(var r,o=ye()(e.target.files);!(n=(r=o.next()).done);n=!0){var s=r.value,l=new FileReader;l.readAsText(s,"UTF-8"),l.onload=xe(u()({},t,{title:s.name,file:s,fit:1===e.target.files.length}))}}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}}(t,e)}},Le=n("CXX0"),Me=n("LL0P"),Ce=n("mAt+");function Pe(e){e.html='<i class="'+e.icon+'"></i>',Ce.a.call(this,e)}Le.a.inherits(Pe,Ce.a);var Se=Pe,Ee=function(e){return new p.a({html:e.html,title:e.title,handleClick:function(){var t=document.getElementById(e.elementId);t&&t.click()}})},Ie=function(e){return new Se(e)};function Ve(e){var t=this;if(Me.a.call(this,e),e.toggleButtons){var n=new Me.a({toggleOne:!0,group:!0});e.toggleButtons.forEach(function(e){return t.addControl(Ie(e))}),this.addControl(n)}e.buttons.forEach(function(e){return t.addControl(Ee(e))}),e.position&&this.setPosition(e.position)}Le.a.inherits(Ve,Me.a);var _e=Ve,ze=n("8+tQ"),Oe=n("bdNf"),He=function(e,t){var n=[{title:"read track file",html:'<i class="fa fa-folder-open"></i>',elementId:t.openId},{title:"export current track",html:'<i class="fa fa-bars"></i>',elementId:t.saveId}],a=new W.a({}),i=[{icon:"fa fa-hand-pointer-o",className:"select",title:"Select",interaction:new ze.a},{icon:"fa fa-pencil",title:"draw line",interaction:new Oe.a({type:"LineString",source:a})}],r=new _e({buttons:n,position:"top-left"});e.addControl(r);var o=new _e({buttons:[],toggleButtons:i});return o.setVisible(!1),e.addControl(o),e.addLayer(new E.a({title:"draw line",displayInLayerSwitcher:!1,source:a,style:oe})),[r,o]},Te=n("P/M1"),Be=n("I0Hm"),Fe=n("JwSH"),Ge=n("vXa5"),Re=(n("vp8q"),n("pZ8A")),je=function(e,t){[{title:"menu",html:'<i class="fa fa-bars"></i>',class:"ol-menu",handleClick:function(){t.store.commit("setDrawer",!0)}},{title:"draw a new track",html:'<i class="fa fa-file"></i>',class:"ol-new-track",handleClick:function(){t.hBar.setVisible(!t.hBar.getVisible())}}].forEach(function(t){return e.addControl(function(e){var t=new p.a({html:e.html,title:e.title,handleClick:e.handleClick});return e.class&&t.element.classList.add(e.class),t}(t))}),e.addControl(new Be.a),e.addControl(new Te.a),e.addControl(new Ge.a({trash:!0,extent:!0}));var n=new Re.a({marks:t.bookmarks});e.addControl(n);var a=new Fe.a;a.on("select",function(t){e.getView().animate({center:t.coordinate,zoom:Math.max(e.getView().getZoom(),13)})}),e.addControl(a)},Ae={name:"Map",components:{Menu:he},data:function(){return{title:"Maps",direction:"vertical",right:!0,drawer:!0,miniVariant:!1,map:void 0,controls:[]}},computed:u()({},Object(w.b)(["zoom","center"])),methods:u()({},Object(w.c)(["addTrack"]),{addButton:function(e){var t=new p.a({html:e.html,title:e.title,handleClick:e.handleClick});t.element.classList.add(e.class),this.map.addControl(t)}}),mounted:function(){var e=this;this.map=new d.a({interactions:f.a.defaults().extend([le]),layers:J,target:"map",view:new m.a({center:this.center,zoom:this.zoom})}),this.map.on("moveend",function(e){F.commit("setView",{zoom:e.map.getView().getZoom(),center:e.map.getView().getCenter()})});var t=He(this.map,{saveId:"saveFile",openId:"openFile"}),n=l()(t,2),a=(n[0],n[1]);je(this.map,{hBar:a,store:F}),new p.a({html:'<i class="fa fa-map-signs"></i>',title:"Toggle toolbar",handleClick:function(t){console.log(e.drawer),t.preventDefault(),t.stopPropagation()}}).element.classList.add("ol-profile"),this.map.profil=new ce.a({target:"profil",width:400,height:200}),ue(this.map,this.$store.state.tracks),document.getElementById("openFile").onchange=ke({map:this.map,store:this.$store})}},De={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"app"},[t("Menu",{attrs:{map:this.map}}),this._v(" "),t("div",{staticClass:"map",attrs:{id:"map"}}),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{display:"none"}},[t("input",{attrs:{type:"file",id:"openFile",accept:".gpx",multiple:""}})])}]};var Ne=n("VU/8")(Ae,De,!1,function(e){n("Py45")},null,null).exports;a.a.use(o.a);var qe=new o.a({routes:[{path:"/",name:"Maps",component:Ne}]}),Ye=n("3EgV"),$e=n.n(Ye),Je=(n("7zck"),n("9JMe")),Ue=n("HcO+"),Xe=n.n(Ue),Ze=n("yJzH");a.a.use($e.a),a.a.config.productionTip=!1,a.a.use(Xe.a),Object(Je.sync)(F,qe),a.a.use(Ze.a,"v-icon"),new a.a({el:"#app",router:qe,store:F,components:{App:r},template:"<App/>"})},Py45:function(e,t){},bMoH:function(e,t){},hjYp:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.823360c1af8c837b0398.js.map